# 项目介绍

本项目为开字母（开盒版）的自动主持程序。

QQ交流群：839100115

# 使用说明

在 `list.txt` 中输入玩家信息。

在 `cmd.txt` 中输入操作命令。

在`config.txt` 中输入配置信息。

在 `out.txt` 中获取每次的结果。

**<big>请不要修改或删除 `don't_modify_me.db` 中的内容或文件本身，可能会造成程序无法正常工作！！！除非您知道该文件到底在程序中被如何应用。</big>**

程序中有预设数值 $N,M$ 和 $L$，分别表示玩家数量，曲目长度和每位玩家最大命数。可以通过修改数值并重编译来获取更大储存空间。

# 文件输入示例

## list.txt 

对于开盒模式：格式为先输入玩家编号，用一个空格隔开后再输入曲名。附带的 `list.txt` 中已给出一个每人 $2$ 命的示例，可打开参考。

对于野局模式：每行一个曲名即可。此处不再给出样例。

## cmd.txt

若需要强制结束游戏，直接一行输入 `STOP` 以结束游戏（一般用于和局）。否则，

先输入一个介于 $1$ 到 $4$ 间的整数，表示操作编号。

若数字为 $1$ ，则在下一行跟一个字符，表示要开的字符。

若数字为 $2$ ，则在下一行跟两个玩家 id，分别表示被猜出的玩家编号和猜出该玩家词条的玩家编号。

若数字为 $2$ 且非野局且非 $1$ 命，再在下一行输入一个数表示被猜出的是玩家给的第几个词条。

若数字为 $3$，则在下一行跟一个字符，表示该字符因先前的操作 $1$ 错误被误开，现在将其改回隐藏状态。

若数字为 $4$，则在下一行跟一个玩家id，表示该编号对应玩家因先前的操作 $2$ 错误被误开，现在将其改回隐藏状态。

若数字为 $4$ 且非野局且非 $1$ 命，再在下一行输入一个数表示被误开的是玩家给的第几个词条。

### 示例

在 `cmd.txt` 中填入以下内容：

```
1
a
```

表示开字母 `a`。

随后再在 `cmd.txt` 中填入以下内容：

```
1
A
```

提示：`错误：该字符已被开。请重新输入合法命令，保存好后在本窗口任意键继续。`。因为字母 `a` 已被开过（半角英文字符存在大小写模糊匹配。此处统一转化为小写，但是在最后的公布中采用原格式）。

若野局或 $1$ 命，又填入以下内容：

```
2
12 34
```

表示 $12$ 号（若为野局，则表示第 $12$ 个词条）的词条被 $34$ 号猜出，$12$ 号游戏失败。

若开盒且非 $1$ 命，又填入以下内容：

```
2
12 34
2
```

表示 $12$ 号的第 $2$ 个词条被 $34$ 号猜出。若在此之前 $12$ 号其他词条都已被猜出，则 $12$ 号游戏失败。

再填入以下内容：

```
3
A
```

表示先前误开了字母 `A`，需要隐藏回去（若指定了一个没开过的字母或是开了但已被隐藏回去的字母程序会给出错误提示）。

若野局或 $1$ 命，又填入以下内容：

```
4
12
```

表示 $12$ 号（若为野局，则表示第 $12$ 个词条）的词条被误开，需要隐藏回去。

若开盒且非 $1$ 命，又填入以下内容：

```
4
12
2
```

表示 $12$ 号的第 $2$ 个词条被误开，需要隐藏回去。

## settings.txt

此文件列出了游戏中的配置。从文件头部到尾部分别存储以下信息：游戏模式（$0$ 为野局，$1$ 为开盒），是否进行合理性审查$^*$（$0$ 为不进行，$1$ 为进行），被开出词条是否保留在场上（$0$ 为不保留，$1$ 为保留），玩家词条数量（可取值范围 $[1,1000]$ 且必须是正整数，否则程序可能不能正常运行。若值为 $1$，则不在玩家后面显示词条数。若游戏模式为野局，则该配置数据用不上，可以随便填。）

比如若文件存储信息为 `1 1 0 1` 则说明该局为开盒局，进行合理性审查，不保留被开出词条，且每位玩家仅提供一个词条。

若您查阅了上述资料还是无从下手，可以使用程序另配的 `config.exe` 来修改游戏配置。

<small> $^*$：合理性审查指一个词条内的所有字符（除空格外）须有 $\ge50\%$ 的字符为英文字母。如遇到该类情况，本程序会自认为自己开了自己。</small>

# 更新说明

<small>注：除 V1.0 外，更新时间以项目计划上传至 github 时间为准。</small>

2023/08/09 V2.1：

* **增加了撤销命令。**(现行的命令 3,4)
* **增加了强制结束游戏功能**（主要用于和局）。
* 移除了下家显示（原因：实际情况过于复杂）。
* 修复了一命的时候死亡榜的多命显示格式。
* 部分提示信息优化。
* 删去了 `list_sample.txt`，改为直接使用 `list.txt`。

2023/07/30 V2.0：

* **增加了多种主持模式。**
  * 目前可支持野局和开盒两种模式。
  * 对于开盒模式，支持一命或多命。
* **增加了设置页面，同时配备专门的可视化设置编辑程序。**
* **重置了操作格式。**
* ~~加入了下家显示。~~<small>（V2.1已移除）</small>
* 将 `dont_modify_me` 修改为 `.db` 后缀。
* 项目介绍中重要的内容加粗处理。

2023/07/22 V1.1：

* **将每个操作间的日志隔开。**
* **增加了合理性筛查（可自行删掉并重新编译以去除此模块）。**<small>注：V2.0 可以在设置中选择是否开启</small>
* 修复了曲名带 `*` 开不出来的问题（开出来后使用全角字符 `＊`）。
* 增加了部分字符的模糊转换。
* 增加了项目介绍。

2023/07/21 V1.0：第一个正式版本发布于Monday周一的猜字母群。

